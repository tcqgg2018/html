<!doctype html>
<html>
    <head>
<!--metaæ ‡ç­¾-->
<meta charset="utf-8"/>
<meta name="description" content="è¿™æ˜¯å°è°­çš„å­¦ä¹ ç¬”è®°"/>
<meta name = "author" content="å°è°­"/>
<meta name= "keywords" content="å°è°­,html,å­¦ä¹ "/>
<meta name="viewport" content="width=device-width, initial-scale= 1.0"/>
<title>å¤§è¶…çš„ç½‘ç«™</title>
<style type="text/css">
        /* CSS styles here... */
        
strong{
    background-color:rgba(0,0,0,0.1);
   color:#FF4500;
   font-size:20px;
   
} 
input{
    background-color:rgba(0,0,0,0.1);
      width:200px; 
      height:25px;
      font-size:25px;
      color:#0000FF;      
}
button{
    rgba(0,0,0,0.1);
    font-size:20px;
 }
 a{
     font-size:18px;
     color:#000000;
     font-family: "å®‹ä½“";
 }
 </style>
        <body style="background-color: #FFFFFF";>
<h1 style ="color:red;">æ¶‚å¸ƒäº§é‡è®¡ç®—å™¨</h1>
<strong>å‹ğŸ”‹å· </strong>
<dt>
  <input type = "text" id="model" />
  <br/>
  <strong>æ€»äº§é‡: </strong>
  <dt>
    <input type = "text" id = "yield1"/>
    <dt>
      <strong>åˆ†æ¡æ•°</strong>
      <br />
      <input type ="text" id = "num1" placeholder="å¦‚: 448/32 æˆ– 14"/>
      <dt>
        <strong>å•ç‰‡é•¿åº¦</strong>
        <dt>
          <input type="text" id ="length1" placeholder="å¦‚: 764+47 æˆ– 811"/>
          <dt>
            <strong>åˆæ ¼ç‡(%)</strong>
            <input style= width:130px height:25px font-size:25px;type ="text" id ="percentage" placeholder="é»˜è®¤: 100%"/>
            <dt>
              <strong>æ¯å·ä¸è¶…è¿‡</strong>
              <input style= width:130px height:25px font-size:25px type="text" id="number" placeholder="é»˜è®¤: 380ç±³"/>
              <dt>
                <br/>
                <button id="btn" style="opacity:0.6; border-radius:45px 45px 45px 45px; width:80px; height:80px; background-color: blue;color:green;">è®¡ç®—ğŸ§®</button>
                <hr/>
                <button id="bt" style= "float: right;" onclick="copyFn(this)">å¤åˆ¶</button>
                <div id ="list">
                  <div class="article" ></div>
                  
                </div>
              
              <script >
// æ¶‚å¸ƒäº§é‡ 
// author: å¤§è¶…
//æ·»åŠ å¤åˆ¶æŒ‰é’®: 2022-06-16 14:26
// æ›´æ–°è®°å½•: 2022-06-12 08:31

//æ¶‚å¸ƒäº§é‡ 


var model = document.getElementById("model");
var yield1 = document.getElementById("yield1");
var num1 = document.getElementById("num1");
var percentage = document.getElementById("percentage");
var length1 = document.getElementById("length1");
var number = document.getElementById("number");
var btn = document.getElementById("btn");
var list = document.getElementById("list");
//var bt = document.getElementById("bt");

Date.prototype.Format = function (fmt) {
    var o = {
        "M+": this.getMonth() + 1, 
        "d+": this.getDate(), 
        "H+": this.getHours(), 
        "m+": this.getMinutes(), 
        "s+": this.getSeconds(), 
       
    };
    if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
    for (var k in o)
    if (new RegExp("(" + k + ")").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
    return fmt;
}
/*function handle_click(element){
    //alert("è®©ä½ ç‚¹è¿˜çœŸçš„ç‚¹å•ŠğŸ¤ªğŸ˜œ");
    element.innerText="å¤åˆ¶æˆåŠŸ";
    element.style.color = "red";
}*/

btn.addEventListener("click",function(){
    if(percentage.value==""){
        percentage.value=100;
    }
    if(number.value==""){
        number.value=380;
    }
    //æ€»å¤§ç‰‡æ•°
    var pieces = Math.ceil(eval(yield1.value)/Math.round(eval(num1.value))*parseFloat(percentage.value)/100);    
    //æ€»ç±³æ•°
    var length2 =     Math.ceil(pieces*eval(length1.value)/1000);
    //console.log(eval(length1.value))
    //æ€»å·æ•°
    var roll = Math.ceil(length2/number.value);
    //æ¯å·ç±³æ•°
    var rollm=Math.ceil(length2/roll);
    //æ¯å·ç‰‡æ•°
    var rolls = Math.ceil(pieces/roll);
    
    var num_random = ((Math.random()*3+4).toFixed(1))/1000;
    var scraps = Math.ceil(eval(yield1.value)*num_random);
    var scrap = Math.ceil(scraps/Math.round(eval(num1.value)))*Math.round(eval(num1.value));
    var scrap_rate = (scrap/eval(yield1.value)*100).toFixed(2);
    //var listed = [...Array(roll).keys()].map(val =>val +1).map(val => val * rolls);
    //var result = listed.join("âŸ");
    /*var result = listed.fotEach(function(index, obj){
        return (index,obj);
    });*/
    //var list = [...Array(roll).keys()].map(val => val * rolls);

    //console.log(scraps);
    
    /*function fun(){
        for(var i=1;i<=roll;i++){
            console.log(rolls*i);
        }
    }*/
    
    
    list.innerHTML = list.innerHTML + `
     <div class="article">
        <h3>ã€å‹ğŸ”‹å·ã€‘${model.value}</h3>
        <dt><a>ã€æ¯å·ç‰‡æ•°ã€‘${rolls} ç‰‡ x ${roll} å·</a>
        <dt><a>ã€æ¯å·ç±³æ•°ã€‘${rollm} ç±³</a>
        <dt><a>ã€æ€»ç±³æ•°ã€‘${length2} ç±³</a>
        <dt><a>ã€è¾“å…¥å€¼ã€‘ (${yield1.value}) pcs â½ ${Math.round(eval(num1.value))} æ¡ â½ (${length1.value}) mm â½ ${percentage.value}%</a>
        <dt><a>ã€åˆ†å·åˆ—è¡¨ã€‘: [${result}]</a>
        <!--dt><br/><a>ã€æŠ¥åºŸæ¸…å•ğŸš®ã€‘</a>
      <dt><a>ã€æ€»å¤§ç‰‡æ•°ã€‘${pieces} ç‰‡</a>
       <dt><a>ã€æ€»äº§é‡ã€‘${eval(yield1.value)} pcs</a>
        <dt><a>ã€åˆ†æ¡æ•°ã€‘${Math.round(eval(num1.value))} æ¡</a>
       <dt><a>ã€æŠ¥åºŸæ•°ã€‘${scrap} pcs</a>
       <dt><a>ã€æŠ¥åºŸç‡ã€‘${scrap_rate}%</a-->
        
                 
    <p style=color:#F00056;font-size:20px>â¤ï¸â° ${new Date().Format("yyyy-MM-dd HH:mm:ssâ¤ï¸\n")}</p>
    </div>`;
    model.value = "";
    yield1.value = "";
    num1.value="";
   percentage.value="";
    length1.value="";
    number.value="";
})
    
function copyFn(element){
    var val =window.getSelection().selectAllChildren(list);
      document.execCommand("Copy");
        element.innerText="å¤åˆ¶æˆåŠŸ";
        element.style.color = "red";
}


     
              </script>
          </body>
    </html>
